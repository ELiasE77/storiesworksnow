<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Journal Entries</title>
  <link rel="stylesheet" th:href="@{/css/journal_original.css}">
  <style>
    #speechIndicator {
      display: none; /* Hide the speech indicator by default */
      color: green;
    }
  </style>
</head>
<body>
<h1>Journal Entries</h1>

<form id="journal-form" action="/journal/save" method="POST">
  <textarea name="content" id="journal-content" placeholder="Write your journal entry here..."></textarea>
  <button type="button" id="speechToTextBtn">Use Speech-to-Text</button>
  <button type="submit">Submit</button>
  <button type="button" id="get-feedback">Get Feedback</button> <!-- New button for ChatGPT feedback -->
  <div id="feedback"> <!-- Feedback will be shown here -->
    <h3>AI Feedback</h3>
    <p id="feedback-text"></p>
  </div>
  <button type="button" id="generate-image">Generate Image</button>
  <div id="generated-image-container">
    <img id="generated-image" src="" alt="Generated Image" style="display: none; max-width: 100%;" />
  </div>
  <div id="speechIndicator">ðŸŽ¤ Listening...</div>
</form>

<!-- Displaying journal entries -->
<div id="journal-entries">
  <ul>
    <!-- Loop through each entry in the 'entries' attribute -->
    <li th:each="entry : ${entries}">
      <p th:text="${entry.content}"></p> <!-- Display journal content -->
      <img th:src="${entry.imageUrl}" alt="Generated Image" style="max-width: 100%;" th:if="${entry.imageUrl}"/>
      <small th:text="'Written on: ' + ${entry.timestamp}"></small>
    </li>
  </ul>
</div>

<script th:src="@{/js/journaling.js}"></script>

</body>
</html>
